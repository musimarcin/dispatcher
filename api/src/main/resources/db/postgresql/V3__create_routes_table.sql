CREATE TABLE IF NOT EXISTS routes (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    distance DECIMAL(10, 2) NOT NULL,
    estimated_time INT,
    start_time TIMESTAMP,
    end_time TIMESTAMP,
    status VARCHAR(20) DEFAULT 'planned',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    vehicle_id BIGINT REFERENCES vehicles(id),
    user_id BIGINT REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS route_points (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    latitude DOUBLE PRECISION NOT NULL,
    longitude DOUBLE PRECISION NOT NULL,
    sequence INT NOT NULL,
    route_id BIGINT REFERENCES routes(id) ON DELETE CASCADE
);